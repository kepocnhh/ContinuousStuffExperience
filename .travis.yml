language: java

jdk:
  - openjdk8

install:
  - export BASH_PATH="${TRAVIS_BUILD_DIR}/buildSrc/src/main/resources/travis/bash"
  - source ${BASH_PATH}/set_environment_variables.sh

before_script:
  - source ${BASH_PATH}/before_script.sh

script:
  - gradle runTests || TESTING_STATUS=$?; $(exit $TESTING_STATUS)
  - gradle collectTestingReport
  - gradle collectTestCoverageReport
  - gradle collectDocumentation
  - gradle runTestCoverageVerification || TEST_COVERAGE_VERIFICATION_STATUS=$?; $(exit $TEST_COVERAGE_VERIFICATION_STATUS)
  - gradle runDocumentationVerification || DOCUMENTATION_VERIFICATION_STATUS=1; $(exit $DOCUMENTATION_VERIFICATION_STATUS)
  - gradle runStyleVerification || STYLE_VERIFICATION_STATUS=$?; $(exit $STYLE_VERIFICATION_STATUS)
  - gradle checkWarning || CHECK_WARNING_STATUS=$?; $(exit $CHECK_WARNING_STATUS)
  - gradle checkReadme || CHECK_README_STATUS=$?; $(exit $CHECK_README_STATUS)
  - source ${BASH_PATH}/gh_pages_report.sh || GH_PAGES_REPORT_STATUS=$?; $(exit $GH_PAGES_REPORT_STATUS)

after_failure:
  - BUILD_SUCCESS=1

after_script:
  - bash ${BASH_PATH}/after_script.sh
